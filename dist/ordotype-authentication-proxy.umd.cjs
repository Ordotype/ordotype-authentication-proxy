(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";var m=Object.defineProperty;var w=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>w(e,typeof t!="symbol"?t+"":t,n);const e={GET_APP:"memberstack.getApp"};function t(){const o=document.cookie.split("; ");for(const i of o){const[r,a]=i.split("=");if(r===void 0)return a}throw new Error("Device Id cookie not found")}const n="";class d{constructor(){u(this,"headers");throw window.localStorage.getItem("ms_session_id"),t(),new Error("Missing API key for AuthService")}async request(o,i="GET",r=null,a={}){const l=`${n}/${o}`,h={"Content-Type":"application/json",...this.headers,...a},f={method:i,headers:h,...r&&{body:JSON.stringify(r)}};try{const s=await fetch(l,f);if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);return await s.json()}catch(s){throw console.error("API Request Failed:",s),s}}async validateSessionStatus(){try{const o=localStorage.getItem("_ms-mid");return await this.request("validate-session-status","POST",null,{Authorization:`Bearer ${o}`})}catch(o){throw console.error("Session validation failed:",o),o}}}document.addEventListener(e.GET_APP,async()=>{console.log("getApp"),await new d().validateSessionStatus()})});
