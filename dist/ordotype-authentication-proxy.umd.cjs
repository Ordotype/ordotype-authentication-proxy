(function(t){typeof define=="function"&&define.amd?define(t):t()})(function(){"use strict";var h=Object.defineProperty;var g=(t,n,r)=>n in t?h(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var d=(t,n,r)=>g(t,typeof n!="symbol"?n+"":n,r);const t={LOGOUT:"memberstack.logout",GET_APP:"memberstack.getApp",LOGIN:"memberstack.login"};function n(){window._msConfig||(window._msConfig={preventLogin:!0}),window.$memberstackDom=new Proxy(window.$memberstackDom,{get(l,e){const o=l[e];return typeof o=="function"?async function(...s){var i;if(console.log(`Method ${e} called with arguments: ${JSON.stringify(s)}`),e==="logout"){const c=new Event(t.LOGOUT,{bubbles:!1,cancelable:!1});document.dispatchEvent(c)}if(e==="getApp"){const c=new Event(t.GET_APP,{bubbles:!1,cancelable:!1});document.dispatchEvent(c)}if(e==="loginMemberEmailPassword"){const c=new Event(t.LOGIN,{bubbles:!1,cancelable:!1});return document.dispatchEvent(c),((i=window._msConfig)==null?void 0:i.preventLogin)&&!1}return o.apply(l,s)}:o}})}function r(){const l="_ga_7T2LX34911",e=document.cookie.split("; ");for(const o of e){const[s,i]=o.split("=");if(s===l)return i}throw new Error("Device Id cookie not found")}const u="https://staging-api.ordotype.fr/v1.0.0";class f{constructor(){d(this,"headers");const e="pk_sb_e80d8429a51c2ceb0530",o=window.localStorage.getItem("ms_session_id"),s=r();this.headers={"X-Api-Key":e,"X-Session-Id":o??void 0,"X-Device-Id":s??void 0}}async request(e,o,s="GET",i=null,c={}){const m=`${u}/${o}/${e}`,w={"Content-Type":"application/json",...this.headers,...c},v={method:s,headers:w,...i&&{body:JSON.stringify(i)}};try{const a=await fetch(m,v);if(!a.ok)throw new Error(`Error ${a.status}: ${a.statusText}`);return await a.json()}catch(a){throw console.error("API Request Failed:",a),a}}async validateSessionStatus(){try{const e=localStorage.getItem("_ms-mid");return await this.request("validate-session-status","auth","POST",null,{Authorization:`Bearer ${e}`})}catch(e){throw console.error("Session validation failed:",e),e}}}n(),document.addEventListener(t.GET_APP,async()=>{console.log("getApp"),await new f().validateSessionStatus()})});
