(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";var m=Object.defineProperty;var w=(e,t,s)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var u=(e,t,s)=>w(e,typeof t!="symbol"?t+"":t,s);const e={GET_APP:"memberstack.getApp"};function t(){const o=document.cookie.split("; ");for(const i of o){const[r,a]=i.split("=");if(r===void 0)return a}throw new Error("Device Id cookie not found")}const s=void 0;class d{constructor(){u(this,"headers");throw window.localStorage.getItem("ms_session_id"),t(),new Error("Missing API key for AuthService")}async request(o,i="GET",r=null,a={}){const l=`${s}/${o}`,f={"Content-Type":"application/json",...this.headers,...a},h={method:i,headers:f,...r&&{body:JSON.stringify(r)}};try{const n=await fetch(l,h);if(!n.ok)throw new Error(`Error ${n.status}: ${n.statusText}`);return await n.json()}catch(n){throw console.error("API Request Failed:",n),n}}async validateSessionStatus(){try{const o=localStorage.getItem("_ms-mid");return await this.request("validate-session-status","POST",null,{Authorization:`Bearer ${o}`})}catch(o){throw console.error("Session validation failed:",o),o}}}document.addEventListener(e.GET_APP,async()=>{console.log("getApp"),await new d().validateSessionStatus()})});
