(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";var f=Object.defineProperty;var m=(e,o,n)=>o in e?f(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n;var d=(e,o,n)=>m(e,typeof o!="symbol"?o+"":o,n);const e={GET_APP:"memberstack.getApp"};function o(){const t=document.cookie.split("; ");for(const r of t){const[i,c]=r.split("=");if(i===void 0)return c}throw new Error("Device Id cookie not found")}const n="https://staging-api.ordotype.fr";class u{constructor(){d(this,"headers");const t="pk_sb_e80d8429a51c2ceb0530",r=window.localStorage.getItem("ms_session_id"),i=o();this.headers={"X-Api-Key":t,"X-Session-Id":r??void 0,"X-Device-Id":i??void 0}}async request(t,r="GET",i=null,c={}){const l=`${n}/${t}`,h={"Content-Type":"application/json",...this.headers,...c},p={method:r,headers:h,...i&&{body:JSON.stringify(i)}};try{const s=await fetch(l,p);if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);return await s.json()}catch(s){throw console.error("API Request Failed:",s),s}}async validateSessionStatus(){try{const t=localStorage.getItem("_ms-mid");return await this.request("validate-session-status","POST",null,{Authorization:`Bearer ${t}`})}catch(t){throw console.error("Session validation failed:",t),t}}}document.addEventListener(e.GET_APP,async()=>{console.log("getApp"),await new u().validateSessionStatus()})});
